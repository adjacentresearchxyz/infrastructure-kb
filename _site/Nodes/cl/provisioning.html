<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Consensus Layer Provisioning | Adjacent</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="Consensus Layer Provisioning" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A Knowledge base for operating infrastructure for validators, keepers, etc." /> <meta property="og:description" content="A Knowledge base for operating infrastructure for validators, keepers, etc." /> <link rel="canonical" href="http://localhost:4000/Nodes/cl/provisioning.html" /> <meta property="og:url" content="http://localhost:4000/Nodes/cl/provisioning.html" /> <meta property="og:site_name" content="Adjacent" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Consensus Layer Provisioning" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A Knowledge base for operating infrastructure for validators, keepers, etc.","headline":"Consensus Layer Provisioning","url":"http://localhost:4000/Nodes/cl/provisioning.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> Adjacent </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Concepts category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/Concepts/" class="nav-list-link">Concepts</a><ul class="nav-list"><li class="nav-list-item "><a href="/Concepts/Business.html" class="nav-list-link">Business</a></li><li class="nav-list-item "><a href="/Concepts/Business%20Continuity.html" class="nav-list-link">Business Continuity</a></li><li class="nav-list-item "><a href="/Concepts/Building.html" class="nav-list-link">Cosmos Tools</a></li><li class="nav-list-item "><a href="/Concepts/HSM.html" class="nav-list-link">HSM for Signing</a></li><li class="nav-list-item "><a href="/Concepts/Validator%20High%20Availability.html" class="nav-list-link">High Availability</a></li><li class="nav-list-item "><a href="/Concepts/Key%20Management.html" class="nav-list-link">Key Management</a></li><li class="nav-list-item "><a href="/Concepts/Linux%20Config.html" class="nav-list-link">Linux Configuration</a></li><li class="nav-list-item "><a href="/Concepts/Monitoring.html" class="nav-list-link">Monitoring</a></li><li class="nav-list-item "><a href="/Concepts/Peers.html" class="nav-list-link">Peers</a></li><li class="nav-list-item "><a href="/Concepts/Security%20Engineering.html" class="nav-list-link">Security Engineering</a></li><li class="nav-list-item "><a href="/Concepts/Systems%20Design.html" class="nav-list-link">Systems Design</a></li><li class="nav-list-item "><a href="/Concepts/Testing.html" class="nav-list-link">Testing</a></li><li class="nav-list-item "><a href="/Concepts/Validator%20Operations%20Guide.html" class="nav-list-link">Validator Operations</a></li><li class="nav-list-item "><a href="/Concepts/Values.html" class="nav-list-link">Values</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Nodes category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/Nodes/" class="nav-list-link">Nodes</a><ul class="nav-list"><li class="nav-list-item "><a href="/Nodes/cl/nodes.html" class="nav-list-link">Consensus Layer Nodes</a></li><li class="nav-list-item active"><a href="/Nodes/cl/provisioning.html" class="nav-list-link active">Consensus Layer Provisioning</a></li><li class="nav-list-item "><a href="/Nodes/el/nodes.html" class="nav-list-link">Execution Layer Nodes</a></li><li class="nav-list-item "><a href="/Nodes/el/provisioning.html" class="nav-list-link">Execution Provisioing</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Tools and Resources category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/Tools/" class="nav-list-link">Tools and Resources</a><ul class="nav-list"><li class="nav-list-item "><a href="/Tools/CoreOS%2038d7c619ca894417aa08c624154e4f05.html" class="nav-list-link">CoreOS</a></li><li class="nav-list-item "><a href="/Tools/Grafana%2077a16aee0ed046b2a0d38896117bae4f.html" class="nav-list-link">Grafana</a></li><li class="nav-list-item "><a href="/Tools/Nix%207784f9d6cc4e4d22b641606d10105fc4.html" class="nav-list-link">Nix</a></li><li class="nav-list-item "><a href="/Tools/Systemd%2052d24727df354933a92435c35b657813.html" class="nav-list-link">Systemd</a></li><li class="nav-list-item "><a href="/Tools/Tailscale%20db8b7f2df4aa4d2e81cf9137b3ea7dfe.html" class="nav-list-link">Tailscale</a></li><li class="nav-list-item "><a href="/Tools/Blog%20Posts.html" class="nav-list-link">Technical Knowledge Blogs</a></li><li class="nav-list-item "><a href="/Tools/Terraform%205bdc9ddd7b2342e6b67b83d866006fd6.html" class="nav-list-link">Terraform</a></li><li class="nav-list-item "><a href="/Tools/Vault%20fd5dd827a9de4245937760f75b9a6baa.html" class="nav-list-link">Vault</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Adjacent" aria-label="Search Adjacent" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://adjacentresearch.xyz" class="site-button" > Adjacent </a> </li> <li class="aux-nav-list-item"> <a href="https://twitter.com/adjacentresearchxyz" class="site-button" > Twitter </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/Nodes/">Nodes</a></li> <li class="breadcrumb-nav-list-item"><span>Consensus Layer Provisioning</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="provisioning-consensus-layer-checkpoint-sync"> <a href="#provisioning-consensus-layer-checkpoint-sync" class="anchor-heading" aria-labelledby="provisioning-consensus-layer-checkpoint-sync"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Provisioning Consensus Layer (Checkpoint Sync) </h1> <p>First, it is important to note that provisioning consensus layer via snapshots of data folder is a bad practice. Multiple nodes might end up with the same node ID, and that will bring issues during peers discovery (only one node with a certain ID could be connected to the peers).</p> <p>Good news, is that all CL nodes have a cross-compatible way of syncing quickly: <strong>checkpoint sync</strong>. What it does, is it takes the latest blockchain state from another node (or a file) and applies it w/o doing all the necessary checks. <strong>Only use trusted source nodes for Checkpoint sync!</strong>.</p> <ul> <li>Lighthouse: <a href="https://lighthouse-book.sigmaprime.io/checkpoint-sync.html">https://lighthouse-book.sigmaprime.io/checkpoint-sync.html</a></li> <li>Lodestar: (use <code class="language-plaintext highlighter-rouge">--checkpointSyncUrl</code>, see <a href="https://chainsafe.github.io/lodestar/reference/cli/">https://chainsafe.github.io/lodestar/reference/cli/)</a>)</li> <li>Nimbus: <a href="https://nimbus.guide/trusted-node-sync.html">https://nimbus.guide/trusted-node-sync.html</a></li> <li>Prysm: <a href="https://docs.prylabs.network/docs/prysm-usage/checkpoint-sync">https://docs.prylabs.network/docs/prysm-usage/checkpoint-sync</a></li> <li>Teku: <a href="https://docs.teku.consensys.net/en/latest/HowTo/Get-Started/Checkpoint-Start/">https://docs.teku.consensys.net/en/latest/HowTo/Get-Started/Checkpoint-Start/</a></li> </ul> <p><strong>Your Own Checkpoint Sync</strong></p> <p>You can checkpoint-sync from any up-to-date CL node, that has beacon API enabled.</p> <p><a href="https://github.com/samcm/checkpointz">samcm/checkpointz</a> is a tool that allows you to setup your own checkpoint sync endpoint and make it public if needed.</p> <p><strong>Public Checkpoint Sync Endpoints</strong></p> <p><a href="https://eth-clients.github.io/checkpoint-sync-endpoints/">Community-maintained list of public checkpoint sync services</a> – use it if you don’t have your own checkpoint sync endpoints or have no up-to-date consensus layer nodes.</p> <p>When syncing from one of the public sources, always validate that your node is synced to the correct chain. Use <a href="https://notes.ethereum.org/@launchpad/checkpoint-sync#Step-4">this article</a> to learn how to do that.</p> <p>In Prysm you can also use <code class="language-plaintext highlighter-rouge">—-weak-subjectivity-checkpoint</code> flag (read more <a href="https://docs.prylabs.network/docs/prysm-usage/parameters">here</a>).</p> <p><strong>Checkpoint Sync From A File</strong></p> <p>For most of the CL nodes, you can store the latest state of the network into a file, in SSZ format and use that instead of another node. That is useful if you don’t have any trusted node or you have to recreate the setup after it being completely lost.</p> <p>Most of the nodes require both the latest finalized state and the block corresponding to the finalized state.</p> <p>A good practice is to keep these files upgraded once every week.</p> <p>How to create these files, you can read here: <a href="https://nimbus.guide/trusted-node-sync.html#sync-from-checkpoint-files">“Sync from checkpoint files” in Nimbus Guide</a>. The files obtained there are cross-node compatible.</p> <hr> <footer> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/adjacentresearchxyz/infrastructure-kb/tree/main/Nodes/cl/provisioning.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
